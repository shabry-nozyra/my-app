import React from 'react'
import { Container } from 'react-bootstrap'
import { Card, CardHeader, CardBody, CardText } from 'reactstrap'
import paslon1 from "../image/img.jpg"
import Highcharts from "highcharts";
import HighchartsReact from "highcharts-react-official";
import highchartsMap from "highcharts/modules/map";
import proj4 from "proj4";
highchartsMap(Highcharts); // Initialize the map module


if (typeof window !== "undefined") {
    window.proj4 = window.proj4 || proj4;
}
const mapOptions = {
    chart: {
        map: "hello"
    },
    title: {
        text: 'Perolehan Suara Calon Bupati <br> Solok Selatan Tahun 2020'
    },
    credits: {
        enabled: false
    },
    mapNavigation: {
        enabled: false,
        buttonOptions: {
            enabled: true
        }
    },
    buttonOptions: {
        enabled: true
    },
    navigation: {
        buttonOptions: {
            enabled: true
        }
    },
    legend: {
        align: 'right',
        floating: true,
        title: {
            text: `
            <p>Keterangan : </p><br>
            <p><span style="color: red; font-size: 20px;">●</span> : Paslon 1</p><br>
            <p><span style="color: yellow; font-size: 20px;">●</span> : Paslon 2</p><br>
            <p><span style="color: green; font-size: 20px;">●</span> : Paslon 3</p>
            `
        }
    },
    exporting: {
        enabled: true
    },
    series: [{
        data: [{
            name: "Koto Parik Gadang Diateh",
           
            borderColor: '#fff',
            value: '41%',
            color: 'yellow',
            path: "M122.76519027085733,-385.1419776319735L85.81644671561592,-401.82850186643896L77.47318099599799,-413.7474614715721L87.00834267612926,-442.3529333032202L87.00834267612926,-466.19084050553596L30.98927215824019,-495.98822150644304L26.221691918572084,-513.866642902217L45.29201407803955,-519.8261167008083L25.029797158853825,-562.7343424602063L25.029797158853825,-575.8451872186974L0,-594.9155177837303L8.343265719617943,-599.6830944210132L26.22169191857209,-625.9047839379951L60.78664955676213,-634.2480520592032L89.3921321955658,-634.2480520592032L132.30035555337375,-652.1264734549771L172.82478699015508,-703.3779673355834L187.12752890995444,-740.3267192963901L187.12752890995444,-779.659253571863L156.1382627556895,-822.5674793312612L197.85459135377923,-829.7188502911608L221.69248654814444,-829.7188502911608L263.40881514623413,-814.2242112100531L292.01429898583285,-795.1538926529709L318.23598850281485,-762.972717329447L337.30631906784765,-760.5889350147808L365.9118029074464,-709.3374411341746L406.43623434422767,-706.953646811558L437.4255004984926,-683.1157516171927L452.9201395796004,-690.2671225770923L443.38497429708394,-650.9345883016193L426.69845006261835,-637.8237315351778L423.12275857869327,-634.2480520592032L425.50655290131,-604.4506710582963L419.54707910271867,-577.0370843800059L407.62813150553603,-563.9262396215149L412.395708142819,-542.4721267418159L405.2443371829193,-491.22063286120976L370.6793795447293,-491.22063286120976L308.7008352282489,-473.3422114654358L253.87366187166822,-451.88809858573677L218.11680707216982,-455.4637900696619L206.19784746703667,-432.81778002865445L172.824786990155,-412.5555643102638L150.1787889570981,-410.171769987647"
        }, {
            name: "Sungai Pagu",
            value: '47%',
            color: 'green',
            borderColor: '#fff',
            
            path: "M174.01668415146347,-252.8416208778046L188.3194260712628,-261.18487699106214L208.58164178965347,-292.17415515327764L206.19784746703672,-310.0525765490516L235.9952284679438,-338.65806038865037L241.95470226653512,-339.8499575499587L250.29797038774313,-345.80943134855L276.51965990472513,-348.1932256711668L314.6603090268402,-377.99060667207385L319.42788566412315,-391.10145143056474L343.2657928664389,-392.2933485918731L350.4171638263386,-383.950080470665L351.60906098764696,-382.7581833093567L364.71990574613795,-386.3338747932818L358.76043194754664,-395.86902806784764L394.51727473909455,-437.58535666593735L408.8200166588939,-454.2718929083534L417.163284780102,-475.7260057880524L418.35518194141036,-478.1097881027186L405.24433718291937,-491.2206328612096L370.67937954472933,-491.2206328612096L308.70083522824893,-473.34221146543564L253.87366187166828,-451.88809858573666L218.11680707216988,-455.4637900696618L206.19784746703672,-432.81778002865434L172.82478699015505,-412.5555643102636L150.17878895709816,-410.1717699876469L122.76519027085727,-385.1419776319733L128.72467607739912,-374.4149151881485L131.10845839206536,-355.3445966310662L135.8760470372988,-332.69858659005877L150.17878895709816,-323.1634333154929L163.28963371558916,-304.09310275046005L181.16805511136312,-282.638989870761"
        }, {
            name: "Pauh Duo",
            value: '38%',
            color: 'red',
            borderColor: '#fff',
            path: "M311.0846175429151,-140.80347984202655L318.23598850281485,-163.44948988303398L324.19547430935665,-182.51980844011624L327.7711537853312,-208.74149795709826L337.30631906784765,-236.15508463538856L348.03336950372193,-264.76056847498734L350.41716382633865,-300.51742327448574L362.3361114235213,-327.93100995277604L379.02264766593737,-352.9608023084496L388.5578009405032,-379.18250383338216L410.01191382020227,-407.7879756650303L418.3551819414103,-431.62588286734604L421.93086141738485,-455.4637900696618L408.82001665889385,-454.2718929083534L358.76043194754664,-395.86902806784764L364.71990574613795,-386.3338747932818L351.60906098764696,-382.7581833093567L343.2657928664389,-392.2933485918731L319.42788566412315,-391.10145143056474L314.6603090268402,-377.99060667207385L276.5196599047251,-348.1932256711668L250.2979703877431,-345.80943134855L241.95470226653507,-339.8499575499587L235.99522846794378,-338.65806038865037L206.1978474670367,-310.0525765490516L208.58164178965345,-292.17415515327764L188.31942607126277,-261.18487699106214L174.01668415146344,-252.8416208778046L176.4004784740802,-223.0442398768975L235.99522846794383,-199.20633267458174L238.37902279056058,-169.40896368162515",
            middleY: 0.7
        }, {
            name: "Sangir",
            value: 0,
            color: 'gray',
            borderColor: '#fff',
            
            path: "M728.2479155317628,-217.0847660783062L704.410008329447,-188.4792822387074L697.2586373695474,-137.22778835810135L673.4207301672317,-147.95485080192617L661.501782570049,-124.1169435996104L643.6233611742751,-120.54126412363584L630.5125164157841,-133.65210888212678L628.1287220931674,-122.92504643830196L599.5232382535686,-116.96557263971064L578.0691253738696,-121.73314927699364L570.9177544139699,-113.38989316373608L538.7365910983966,-106.23852220383645L493.44457101638176,-112.19799600242777L448.1525629423175,-76.44114120292937L441.0011919824178,-74.05734688031262L433.84982102251814,-82.40061500152069L424.3146557400017,-76.44114120292937L413.5876053041274,-78.82493552554612L398.0929662230197,-95.51145976001163L389.7496981018116,-138.41968551940965L367.10368806080425,-94.31956259870319L350.41716382633865,-103.85472788121956L337.30631906784765,-118.15746980101895L323.0035771480483,-128.88452023689314L318.23598850281473,-128.88452023689314L311.08461754291505,-140.80347984202626L324.1954743093566,-182.51980844011595L327.77115378533114,-208.74149795709798L348.0333695037218,-264.76056847498705L350.4171638263386,-300.51742327448545L362.33611142352123,-327.93100995277575L379.02264766593726,-352.96080230844933L388.55780094050317,-379.1825038333819L410.01191382020215,-407.78797566503L418.35518194141025,-431.62588286734575L421.9308614173848,-455.4637900696615L457.6877162168832,-450.696201424428L497.0202625003067,-431.62588286734575L530.3933229771883,-403.020399027747L550.655538695579,-363.68786475227404L575.6853310512527,-345.8094313485496L607.8665063747765,-335.0823809126754L625.7449277705505,-327.93100995277575L644.8152463276327,-329.1229071140841L672.2288450138736,-295.74984663720244L696.0667402082389,-243.30645559528793",
            middleY: 0.3
        }, {
            name: "Sangir Jujuan",
            value: 0,
            color: 'gray',
            borderColor: '#fff',
            path: "M679.3802159737735,-497.1801186677516L686.5315869336731,-475.72600578805253L660.3098854087406,-460.2313667069448L650.7747321341748,-443.5448304645287L676.9964216511568,-431.62588286734604L697.2586373695474,-442.35293330322037L698.4505345308557,-392.2933485918731L674.61262732854,-372.03113287348236L630.512516415784,-364.87976191358274L644.815246327633,-329.12290711408434L625.7449277705507,-327.93100995277604L575.6853310512528,-345.80943134855L550.6555386955791,-363.68786475227444L530.3933229771885,-403.0203990277474L497.02026250030684,-431.62588286734615L457.6877162168833,-450.69620142442847L421.93086141738496,-455.46379006966197L408.8200166588939,-454.2718929083536L417.163284780102,-475.7260057880526L405.24433718291937,-491.2206328612098L410.0119138202023,-522.2099110234252L412.39570814281905,-542.4721267418159L407.62813150553615,-563.9262396215149L419.5470791027187,-577.0370843800059L477.94993193527404,-566.3100339441318L520.8581576946721,-550.8153948630239L638.8557725290416,-497.18011866775163"
        }, {
            name: "Sangir Balai Janggo",
            value: 0,
            color: 'gray',borderColor: '#fff',
            path: "M771.1561292832104,-630.6723605752782L816.448149365225,-612.7939391795043L808.1048812440171,-568.6938162587978L842.6698388822072,-573.4614049040313L847.4374155194902,-587.7641468238306L898.6889094000962,-588.9560319771884L921.3349194411037,-556.7748686616152L952.3241855953686,-537.7045501045328L965.4350303538595,-536.5126529432245L1000,-507.90716910362573L967.8188246764762,-487.64495338523506L943.9809294821109,-472.1503143041273L922.5268166024119,-437.5853566659372L887.9618589642218,-423.2826147461378L861.7401574392894,-436.39345950462877L862.9320546005977,-410.17176998764677L824.791417486433,-381.566286148048L837.9022622449239,-356.5364937923744L836.7103650836157,-341.0418547112667L821.215726002508,-331.50668942875035L815.2562522039167,-317.20394750895093L811.680572727942,-316.0120623555932L812.8724578812999,-298.13362895186873L786.6507683643179,-273.10383659619515L728.2479155317626,-217.08476607830605L696.0667402082387,-243.30645559528807L672.2288450138734,-295.7498466372026L644.8152463276326,-329.1229071140842L630.5125164157838,-364.8797619135826L674.6126273285397,-372.03113287348225L698.4505345308555,-392.2933485918729L697.2586373695472,-442.3529333032202L676.9964216511564,-431.62588286734587L650.7747321341744,-443.5448304645285L660.3098854087403,-460.2313667069446L686.5315869336729,-475.72600578805236L679.3802159737733,-497.18011866775134L693.6829458856221,-500.75579814372594L711.5613792893465,-532.9369614592993L737.7830688063285,-546.0478182257408L769.9642441298524,-582.9965581785971L759.2371816860276,-600.8749915823215L785.4588712030096,-610.4101448568873",
            middleY: 0.4
        }, {
            name: "Sangir Batang Hari",
            value: 0,
            color: 'gray',
            borderColor: '#fff',
            path: "M452.9201395796004,-690.2671225770923L463.64720202342517,-724.8320802152823L424.3146557400016,-786.8106245317626L404.05244002161095,-792.770098330354L376.6388533433206,-829.7188502911608L359.9523171009045,-867.8594874053254L406.4362343442277,-867.8594874053254L455.3039339022171,-798.7295721289453L489.86889154040716,-829.7188502911608L508.9392100974895,-809.4566345727701L522.0500548559805,-818.991787847336L545.8879620582962,-810.6485317340786L589.9880729710522,-826.1431588072357L585.2204963337692,-865.4757050906592L586.4123934950776,-875.0108583652251L576.8772282125612,-894.081188930258L588.7961878176944,-908.3839308500573L581.6448168577947,-939.3731982051173L613.825980173368,-947.7164639247353L623.3611454558844,-933.4137232057309L680.5721011271313,-959.6354151243029L685.3396897723647,-988.2408977631067L729.4398006851208,-976.3219465635389L741.3587602902539,-944.1407784447853L716.3289559266296,-910.7677131647234L716.3289559266296,-875.0108583652251L682.955895449748,-841.6377978883435L686.5315869336731,-818.991787847336L659.1179882474323,-795.1538926529707L692.4910607322644,-742.7105016110562L725.8641212091461,-728.4077596912568L721.0965445718631,-716.4888120940742L722.2884297252209,-686.6914310931671L749.7020164035112,-671.19680402001L746.1263369275366,-642.5913201804113L771.1561292832102,-630.6723605752782L785.4588712030096,-610.4101448568874L759.2371816860276,-600.8749915823215L769.9642441298524,-582.9965581785971L737.7830688063285,-546.0478182257408L711.5613792893465,-532.9369614592993L693.6829458856221,-500.75579814372605L679.3802159737733,-497.1801186677515L638.8557725290414,-497.1801186677515L575.6853310512525,-528.1693848220165L538.7365910983963,-544.8559210644326L477.94993193527375,-566.3100339441315L419.5470791027185,-577.0370843800058L423.12275857869304,-634.2480520592032L443.3849742970837,-650.9345883016193"
        }],
        name: 'Solok Selatan',
        dataLabels: {
            enabled: true,
            format: '{point.name}'
        },
        states: {
            hover: {
                color: 'lightskyblue'
            }
        }
    }]
};

class BerandaComponent extends React.Component {
    constructor(props) {
        super(props);
        this.state = { paslons: [], suaras: [] };
        this.headers = [
            { key: 'id', label: 'Id' },
            { key: 'bupati', label: 'Bupati' },
            { key: 'wakil', label: 'Wakil' },
            { key: 'no_urut', label: 'No Urut' }
        ];
    }
    componentDidMount() {
        fetch('https://pantauapp.azurewebsites.net/paslon')
            .then(response => {
                return response.json();
            }).then(result => {
                this.setState({
                    paslons: result
                });
            });
            fetch('https://pantaumicro.azurewebsites.net/suaratotal')
            .then(response => {
                return response.json();
            }).then(result => {
                this.setState({
                    suaras: result
                });
            });
        }
        
 
    render (){
        var persenpaslon = [this.state.suaras.persensuara1, this.state.suaras.persensuara2, this.state.suaras.persensuara3];
        var nilaipaslons = [this.state.suaras.suara1, this.state.suaras.suara2, this.state.suaras.suara3];
        return (
        <Container fluid className="mt-3 px-5">
        <div className="row">
            <div className="col-md-8 center">
                <div className="text-center judul">
                    <h4 className="text-danger">Perhitungan Cepat</h4>
                    <h5>PEMILIHAN BUPATI DAN WAKIL BUPATI KABUPATEN SOLOK SELATAN</h5>
                    <h5>Periode 2021-2026</h5>
                </div>
                <div className="calon row">
                    {
                        this.state.paslons.map(function (item, key) {
                            return (
                                <div className="col-4">
                                    <Card className="p-0 border-0">
                                        <CardBody className="text-center p-0">
                                                 <CardText><h1>{persenpaslon[key]}</h1></CardText>   
                                            <h5>{nilaipaslons[key]} Suara</h5>
                                            <h1>{key+1}</h1>
                                            <img top src={paslon1} alt="cap1" width="80%" />
                                            <CardText>{item.bupati} - {item.wakil}</CardText>
                                        </CardBody>
                                    </Card>
                                </div>
                            )
                        })
                    }
                </div>
            </div>
            <div className="col-md-4">
            <Card>
                <CardHeader className="bg-dark text-white">Peta Sebaran Suara</CardHeader>
                <CardBody className="text-center">
                   <div class="hello">
                   <HighchartsReact
                        constructorType={"mapChart"}
                        highcharts={Highcharts}
                        options={mapOptions}
                    />
                   </div>
                </CardBody>
            </Card>
            </div>
        </div>
    </Container>
        )
    }
}

export default BerandaComponent;
